/* KSHS Version fixed by mc07 */

#include "bbs.h"
#include "modes.h"
#include <stdio.h>
#include <time.h>

/*  buggy & Izero 的故鄉 from buggy.c in Sob3 */
char *where(char *from)           /* 更改UserList上的故鄉 */
{                                 /* 用where做判斷再回傳  */

   #define NUM_HOSTS1 263    /* 更動資料記得要改這裡 */
   char compare1[NUM_HOSTS1][2][30]={
        /* SYSOPs' PC */
        {"localhost",           "夢裡的故鄉"},
        {"MH.kshs.kh.edu.tw",   "MH.kshs.org"},
        {"SysOP.kshs.kh.edu.tw","SYSOP.kshs.org"},

        /* Servers */
        {"cc.kshs.kh.edu.tw",   "cc.kshs.org"},
        {"warez.kshs.kh.edu.tw","warez.kshs.org"},
        {"edu.kshs.kh.edu.tw",  "edu.kshs.org"},
        {"www.kshs.kh.edu.tw",  "www.kshs.org"},
        {"knight.kshs.kh.edu.tw","knight.kshs.org"},

        /* unknow *^o^* */

         {"edu.kshs.kh.edu.tw",  "edu.kshs.org"},

/* 2F Computer Classroom */
{"pc2.kshs.kh.edu","pc3.kshs.org"},
{"pc4.kshs.kh.edu","pc4.kshs.org"},
{"pc5.kshs.kh.edu","pc5.kshs.org"},
{"pc6.kshs.kh.edu","pc6.kshs.org"},
{"pc7.kshs.kh.edu","pc7.kshs.org"},
{"pc8.kshs.kh.edu","pc8.kshs.org"},
{"pc9.kshs.kh.edu","pc9.kshs.org"},
{"pc10.kshs.kh.edu","pc10.kshs.org"},
{"pc11.kshs.kh.edu","pc11.kshs.org"},
{"pc12.kshs.kh.edu","pc12.kshs.org"},
{"pc13.kshs.kh.edu","pc13.kshs.org"},
{"pc14.kshs.kh.edu","pc14.kshs.org"},
{"pc15.kshs.kh.edu","pc15.kshs.org"},
{"pc16.kshs.kh.edu","pc16.kshs.org"},
{"pc17.kshs.kh.edu","pc17.kshs.org"},
{"pc18.kshs.kh.edu","pc18.kshs.org"},
{"pc19.kshs.kh.edu","pc19.kshs.org"},
{"pc20.kshs.kh.edu","pc20.kshs.org"},
{"pc21.kshs.kh.edu","pc21.kshs.org"},
{"pc22.kshs.kh.edu","pc22.kshs.org"},
{"pc23.kshs.kh.edu","pc23.kshs.org"},
{"pc24.kshs.kh.edu","pc24.kshs.org"},
{"pc25.kshs.kh.edu","pc25.kshs.org"},
{"pc26.kshs.kh.edu","pc26.kshs.org"},
{"pc27.kshs.kh.edu","pc27.kshs.org"},
{"pc28.kshs.kh.edu","pc28.kshs.org"},
{"pc29.kshs.kh.edu","pc29.kshs.org"},
{"pc30.kshs.kh.edu","pc30.kshs.org"},
{"pc31.kshs.kh.edu","pc31.kshs.org"},
{"pc32.kshs.kh.edu","pc32.kshs.org"},
{"pc33.kshs.kh.edu","pc33.kshs.org"},
{"pc34.kshs.kh.edu","pc34.kshs.org"},
{"pc35.kshs.kh.edu","pc35.kshs.org"},
{"pc36.kshs.kh.edu","pc36.kshs.org"},
{"pc37.kshs.kh.edu","pc37.kshs.org"},
{"pc38.kshs.kh.edu","pc38.kshs.org"},
{"pc39.kshs.kh.edu","pc39.kshs.org"},
{"pc40.kshs.kh.edu","pc40.kshs.org"},
{"pc41.kshs.kh.edu","pc41.kshs.org"},
{"pc42.kshs.kh.edu","pc42.kshs.org"},
{"pc43.kshs.kh.edu","pc43.kshs.org"},
{"pc44.kshs.kh.edu","pc44.kshs.org"},
{"pc45.kshs.kh.edu","pc45.kshs.org"},
{"pc46.kshs.kh.edu","pc46.kshs.org"},
{"pc47.kshs.kh.edu","pc47.kshs.org"},
{"pc48.kshs.kh.edu","pc48.kshs.org"},
{"pc49.kshs.kh.edu","pc49.kshs.org"},
{"pc50.kshs.kh.edu","pc50.kshs.org"},
{"pc51.kshs.kh.edu","pc51.kshs.org"},
{"pc52.kshs.kh.edu","pc52.kshs.org"},
{"pc53.kshs.kh.edu","pc53.kshs.org"},
{"pc54.kshs.kh.edu","pc54.kshs.org"},
{"pc55.kshs.kh.edu","pc55.kshs.org"},
{"pc56.kshs.kh.edu","pc56.kshs.org"},
{"pc57.kshs.kh.edu","pc57.kshs.org"},
{"pc58.kshs.kh.edu","pc58.kshs.org"},
{"pc59.kshs.kh.edu","pc59.kshs.org"},
{"pc60.kshs.kh.edu","pc60.kshs.org"},
{"pc61.kshs.kh.edu","pc61.kshs.org"},
{"pc62.kshs.kh.edu","pc62.kshs.org"},
{"pc63.kshs.kh.edu","pc63.kshs.org"},
{"pc64.kshs.kh.edu","pc64.kshs.org"},
{"pc65.kshs.kh.edu","pc65.kshs.org"},
{"pc66.kshs.kh.edu","pc66.kshs.org"},
{"pc67.kshs.kh.edu","pc67.kshs.org"},
{"pc68.kshs.kh.edu","pc68.kshs.org"},
{"pc69.kshs.kh.edu","pc69.kshs.org"},
{"pc70.kshs.kh.edu","pc70.kshs.org"},
{"pc71.kshs.kh.edu","pc71.kshs.org"},
{"pc72.kshs.kh.edu","pc72.kshs.org"},
{"pc73.kshs.kh.edu","pc73.kshs.org"},
{"pc74.kshs.kh.edu","pc74.kshs.org"},
{"pc75.kshs.kh.edu","pc75.kshs.org"},
{"pc76.kshs.kh.edu","pc76.kshs.org"},
{"pc77.kshs.kh.edu","pc77.kshs.org"},
{"pc78.kshs.kh.edu","pc78.kshs.org"},
{"pc79.kshs.kh.edu","pc79.kshs.org"},
{"pc80.kshs.kh.edu","pc80.kshs.org"},
{"pc81.kshs.kh.edu","pc81.kshs.org"},
{"pc82.kshs.kh.edu","pc82.kshs.org"},
{"pc83.kshs.kh.edu","pc83.kshs.org"},
{"pc84.kshs.kh.edu","pc84.kshs.org"},
{"pc85.kshs.kh.edu","pc85.kshs.org"},
{"pc86.kshs.kh.edu","pc86.kshs.org"},
{"pc87.kshs.kh.edu","pc87.kshs.org"},
{"pc88.kshs.kh.edu","pc88.kshs.org"},
{"pc89.kshs.kh.edu","pc89.kshs.org"},
{"pc90.kshs.kh.edu","pc90.kshs.org"},
{"pc91.kshs.kh.edu","pc91.kshs.org"},
{"pc92.kshs.kh.edu","pc92.kshs.org"},
{"pc93.kshs.kh.edu","pc93.kshs.org"},
{"pc94.kshs.kh.edu","pc94.kshs.org"},
{"pc95.kshs.kh.edu","pc95.kshs.org"},
{"pc96.kshs.kh.edu","pc96.kshs.org"},
{"pc97.kshs.kh.edu","pc97.kshs.org"},
{"pc98.kshs.kh.edu","pc98.kshs.org"},
{"pc99.kshs.kh.edu","pc99.kshs.org"},
{"pc100.kshs.kh.edu","pc100.kshs.org"},
{"pc101.kshs.kh.edu","pc101.kshs.org"},
{"pc102.kshs.kh.edu","pc102.kshs.org"},
{"pc103.kshs.kh.edu","pc103.kshs.org"},
{"pc104.kshs.kh.edu","pc104.kshs.org"},
{"pc105.kshs.kh.edu","pc105.kshs.org"},
{"pc106.kshs.kh.edu","pc106.kshs.org"},
{"pc107.kshs.kh.edu","pc107.kshs.org"},
{"pc108.kshs.kh.edu","pc108.kshs.org"},
{"pc109.kshs.kh.edu","pc109.kshs.org"},
{"pc110.kshs.kh.edu","pc110.kshs.org"},
{"pc111.kshs.kh.edu","pc111.kshs.org"},
{"pc112.kshs.kh.edu","pc112.kshs.org"},
{"pc113.kshs.kh.edu","pc113.kshs.org"},
{"pc114.kshs.kh.edu","pc114.kshs.org"},
{"pc115.kshs.kh.edu","pc115.kshs.org"},
{"pc116.kshs.kh.edu","pc116.kshs.org"},
{"pc117.kshs.kh.edu","pc117.kshs.org"},
{"pc118.kshs.kh.edu","pc118.kshs.org"},
{"pc119.kshs.kh.edu","pc119.kshs.org"},
{"pc120.kshs.kh.edu","pc120.kshs.org"},
{"pc121.kshs.kh.edu","pc121.kshs.org"},
{"pc122.kshs.kh.edu","pc122.kshs.org"},
{"pc123.kshs.kh.edu","pc123.kshs.org"},
{"pc124.kshs.kh.edu","pc124.kshs.org"},
{"pc125.kshs.kh.edu","pc125.kshs.org"},
{"pc126.kshs.kh.edu","pc126.kshs.org"},
{"pc127.kshs.kh.edu","pc127.kshs.org"},
{"pc128.kshs.kh.edu","pc128.kshs.org"},
{"pc129.kshs.kh.edu","pc129.kshs.org"},
{"pc130.kshs.kh.edu","pc130.kshs.org"},
{"pc131.kshs.kh.edu","pc131.kshs.org"},
{"pc132.kshs.kh.edu","pc132.kshs.org"},
{"pc133.kshs.kh.edu","pc133.kshs.org"},
{"pc134.kshs.kh.edu","pc134.kshs.org"},
{"pc135.kshs.kh.edu","pc135.kshs.org"},
{"pc136.kshs.kh.edu","pc136.kshs.org"},
{"pc137.kshs.kh.edu","pc137.kshs.org"},
{"pc138.kshs.kh.edu","pc138.kshs.org"},
{"pc139.kshs.kh.edu","pc139.kshs.org"},
{"pc140.kshs.kh.edu","pc140.kshs.org"},
{"pc141.kshs.kh.edu","pc141.kshs.org"},
{"pc142.kshs.kh.edu","pc142.kshs.org"},
{"pc143.kshs.kh.edu","pc143.kshs.org"},
{"pc144.kshs.kh.edu","pc144.kshs.org"},
{"pc145.kshs.kh.edu","pc145.kshs.org"},
{"pc146.kshs.kh.edu","pc146.kshs.org"},
{"pc147.kshs.kh.edu","pc147.kshs.org"},
{"pc148.kshs.kh.edu","pc148.kshs.org"},
{"pc149.kshs.kh.edu","pc149.kshs.org"},
{"pc150.kshs.kh.edu","pc150.kshs.org"},
{"pc151.kshs.kh.edu","pc151.kshs.org"},
{"pc152.kshs.kh.edu","pc152.kshs.org"},
{"pc153.kshs.kh.edu","pc153.kshs.org"},
{"pc154.kshs.kh.edu","pc154.kshs.org"},
{"pc155.kshs.kh.edu","pc155.kshs.org"},
{"pc156.kshs.kh.edu","pc156.kshs.org"},
{"pc157.kshs.kh.edu","pc157.kshs.org"},
{"pc158.kshs.kh.edu","pc158.kshs.org"},
{"pc159.kshs.kh.edu","pc159.kshs.org"},
{"pc160.kshs.kh.edu","pc160.kshs.org"},
{"pc161.kshs.kh.edu","pc161.kshs.org"},
{"pc162.kshs.kh.edu","pc162.kshs.org"},
{"pc163.kshs.kh.edu","pc163.kshs.org"},
{"pc164.kshs.kh.edu","pc164.kshs.org"},
{"pc165.kshs.kh.edu","pc165.kshs.org"},
{"pc166.kshs.kh.edu","pc166.kshs.org"},
{"pc167.kshs.kh.edu","pc167.kshs.org"},
{"pc168.kshs.kh.edu","pc168.kshs.org"},
{"pc169.kshs.kh.edu","pc169.kshs.org"},
{"pc170.kshs.kh.edu","pc170.kshs.org"},
{"pc171.kshs.kh.edu","mc07.kshs.org"},
{"pc172.kshs.kh.edu","pc172.kshs.org"},
{"pc173.kshs.kh.edu","pc173.kshs.org"},
{"pc174.kshs.kh.edu","pc174.kshs.org"},
{"pc175.kshs.kh.edu","pc175.kshs.org"},
{"pc176.kshs.kh.edu","pc176.kshs.org"},
{"pc177.kshs.kh.edu","pc177.kshs.org"},
{"pc178.kshs.kh.edu","pc178.kshs.org"},
{"pc179.kshs.kh.edu","pc179.kshs.org"},
{"pc180.kshs.kh.edu","pc180.kshs.org"},
{"pc181.kshs.kh.edu","pc181.kshs.org"},
{"pc182.kshs.kh.edu","pc182.kshs.org"},
{"pc183.kshs.kh.edu","pc183.kshs.org"},
{"pc184.kshs.kh.edu","pc184.kshs.org"},
{"pc185.kshs.kh.edu","pc185.kshs.org"},
{"pc186.kshs.kh.edu","pc186.kshs.org"},
{"pc187.kshs.kh.edu","pc187.kshs.org"},
{"pc188.kshs.kh.edu","pc188.kshs.org"},
{"pc189.kshs.kh.edu","pc189.kshs.org"},
{"pc190.kshs.kh.edu","pc190.kshs.org"},
{"pc191.kshs.kh.edu","pc191.kshs.org"},
{"pc192.kshs.kh.edu","pc192.kshs.org"},
{"pc193.kshs.kh.edu","pc193.kshs.org"},
{"pc194.kshs.kh.edu","pc194.kshs.org"},
{"pc195.kshs.kh.edu","pc195.kshs.org"},
{"pc196.kshs.kh.edu","pc196.kshs.org"},
{"pc197.kshs.kh.edu","pc197.kshs.org"},
{"pc198.kshs.kh.edu","pc198.kshs.org"},
{"pc199.kshs.kh.edu","pc199.kshs.org"},
{"pc200.kshs.kh.edu","pc200.kshs.org"},
{"pc201.kshs.kh.edu","pc201.kshs.org"},
{"pc202.kshs.kh.edu","pc202.kshs.org"},
{"pc203.kshs.kh.edu","pc203.kshs.org"},
{"pc204.kshs.kh.edu","pc204.kshs.org"},
{"pc205.kshs.kh.edu","pc205.kshs.org"},
{"pc206.kshs.kh.edu","pc206.kshs.org"},
{"pc207.kshs.kh.edu","pc207.kshs.org"},
{"pc208.kshs.kh.edu","pc208.kshs.org"},
{"pc209.kshs.kh.edu","pc209.kshs.org"},
{"pc210.kshs.kh.edu","pc210.kshs.org"},
{"pc211.kshs.kh.edu","pc211.kshs.org"},
{"pc212.kshs.kh.edu","pc212.kshs.org"},
{"pc213.kshs.kh.edu","pc213.kshs.org"},
{"pc214.kshs.kh.edu","pc214.kshs.org"},
{"pc215.kshs.kh.edu","pc215.kshs.org"},
{"pc216.kshs.kh.edu","pc216.kshs.org"},
{"pc217.kshs.kh.edu","pc217.kshs.org"},
{"pc218.kshs.kh.edu","pc218.kshs.org"},
{"pc219.kshs.kh.edu","pc219.kshs.org"},
{"pc220.kshs.kh.edu","pc220.kshs.org"},
{"pc221.kshs.kh.edu","pc221.kshs.org"},
{"pc222.kshs.kh.edu","pc222.kshs.org"},
{"pc223.kshs.kh.edu","pc223.kshs.org"},
{"pc224.kshs.kh.edu","pc224.kshs.org"},
{"pc225.kshs.kh.edu","pc225.kshs.org"},
{"pc226.kshs.kh.edu","pc226.kshs.org"},
{"pc227.kshs.kh.edu","pc227.kshs.org"},
{"pc228.kshs.kh.edu","pc228.kshs.org"},
{"pc229.kshs.kh.edu","pc229.kshs.org"},
{"pc230.kshs.kh.edu","pc230.kshs.org"},
{"pc231.kshs.kh.edu","pc231.kshs.org"},
{"pc232.kshs.kh.edu","pc232.kshs.org"},
{"pc233.kshs.kh.edu","pc233.kshs.org"},
{"pc234.kshs.kh.edu","pc234.kshs.org"},
{"pc235.kshs.kh.edu","pc235.kshs.org"},
{"pc236.kshs.kh.edu","pc236.kshs.org"},
{"pc237.kshs.kh.edu","pc237.kshs.org"},
{"pc238.kshs.kh.edu","pc238.kshs.org"},
{"pc239.kshs.kh.edu","pc239.kshs.org"},
{"pc240.kshs.kh.edu","pc240.kshs.org"},
{"pc241.kshs.kh.edu","pc241.kshs.org"},
{"pc242.kshs.kh.edu","pc242.kshs.org"},
{"pc243.kshs.kh.edu","pc243.kshs.org"},
{"pc244.kshs.kh.edu","pc244.kshs.org"},
{"pc245.kshs.kh.edu","pc245.kshs.org"},
{"pc246.kshs.kh.edu","pc246.kshs.org"},
{"pc247.kshs.kh.edu","pc247.kshs.org"},
{"pc248.kshs.kh.edu","pc248.kshs.org"},
{"pc249.kshs.kh.edu","pc249.kshs.org"},
{"pc250.kshs.kh.edu","mc07.ml.org"},
{"pc251.kshs.kh.edu","pc251.kshs.org"},
{"pc252.kshs.kh.edu","pc252.kshs.org"},
{"pc253.kshs.kh.edu","pc253.kshs.org"},
{"pc254.kshs.kh.edu","pc254.kshs.org"},

        /* 163.19.11.x */
        {"163.19.14.1",         "bbs.kghs.org"}
};

   #define NUM_HOSTS2 7    /* 更動資料記得要改這裡 */
   char compare2[NUM_HOSTS2][2][30]={
        {"163.19.13.",          "高雄女中"},
        {"163.19.14.",          "高雄女中"},
        {"203.64.52.",          "北一女中"},
        {".tnfsh.tn.edu",       "台南一中"},
        {".cksh.tp.edu",        "成功\高中"},
        {".hs.ntnu.edu",        "師大範中"},
        {".ck.tp.edu",          "建國中學"}
};


   int i;

   for(i=0;i<NUM_HOSTS1;i++)
   if(strncmp(compare1[i][0],from,15)==0)
   {
        char *local=(char *)malloc(sizeof(char)*17);
        strcpy(local,compare1[i][1]);
        return local;
    }
   for(i=0;i<NUM_HOSTS2;i++)
   if(strstr(from,compare2[i][0]))
   {
        char *local=(char *)malloc(sizeof(char)*17);
        strcpy(local,compare2[i][1]);
        return local;
    }
    return from;
}
